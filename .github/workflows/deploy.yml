name: ðŸš€ Deploy website

on:
  push:
    branches:
      - master
    paths:
      - "company_home/**"
      - ".github/workflows/deploy.yml"

jobs:
  lint:
    runs-on: ubuntu-latest
    steps:
      - name: ðŸšš Get latest code
        uses: actions/checkout@v2

      - name: ðŸ‘¾ Lint code
        run: |
          npm install
          npm run lint:html

  web-deploy:
    runs-on: ubuntu-latest
    needs: lint
    steps:
      - name: ðŸšš Get latest code
        uses: actions/checkout@v2

      - name: ðŸš€ Deploy code
        uses: SamKirkland/FTP-Deploy-Action@v4.3.0-beta
        with:
          server: ${{ secrets.FTP_SERVER }}
          username: ${{ secrets.FTP_USERNAME }}
          password: ${{ secrets.FTP_PASSWORD }}
          local-dir: ${{ secrets.FTP_LOCAL_DIR }}
          server-dir: ${{ secrets.FTP_SERVER_DIR }}
